<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify</title>
    <link rel="stylesheet" href="Spotify.css">
    <script src="Spotify.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<style>
    *{
    margin: 0;
    padding: 0;

}

:root{
    --a:0;
}

i{
    padding-right: 0.75rem;
}
.container{
    display: flex;
    margin-right: 0.5rem;
    height: 90vh;
}

.spotify img{
    height: 25px;
}
body{
    background-color: black;
    color: white;

}

.left-box{
    position: relative;
    margin: 0.5rem;
    font-size: 1rem;
    font-family: sans-serif;
    width: 18rem;
    height: 100%;
    
}

.hd{
    display: flex;
    margin-bottom: 1rem;
    align-items: center;
    
}

.upper-left{
    padding: 1rem;
    border-radius: 10px;
    background-color:#121212;
    height: 20%;
    width: 16rem;
    margin-bottom: 10px;
    line-height: 2rem;
}
.search{
    color: 	#b3b3b3;
}
.library{
    margin-bottom: 0;
    padding: 0;
}
.lib{
    color: 	#b3b3b3;
    display: flex;
}

.lower-left{
    padding: 1rem;
    border-radius: 10px;
    background-color:#121212;
    height: 70%;
    width: 16rem;
    position: relative;
    
}

.songList{
    height: 92%;
    overflow: scroll;
    overflow-x: hidden;
}
.songList li{
    margin-bottom: 0.5rem;
    height: 2.75rem;
    list-style: none;
    display: flex;
    align-items: center;
    font-size: 0.8rem;
    gap: 30px;
    cursor: pointer;
    padding: 8px 0;
   margin-right:0.5rem;
    border: 1px solid #212121;
    border-radius: 10px;
    justify-content: center;
    justify-content: space-between;
    
}
.songList li:hover{
    background-color: #212121;
}
.music-info{
    display: flex;
    justify-content: center;
    align-content: center;
}
.music-icon{
    padding-left: 0.5rem;
    display: flex;
    align-items: center;
    text-align: center;
}

.now-play{
    /* height: 2rem;
    width: 5rem; */
    /* border: 1px solid white; */
    align-items: center;
    font-size: 0.7rem;
    display: flex;
    margin-right: 0.5rem;
    justify-content: space-between;
}
.now-play i{
    font-size: 1rem;
    display: flex;
    justify-content: center;
    text-align: center;
    align-items: center;
    padding-left: 0.5rem;
}


.footer{
    margin-top: 1.5rem;
    display: flex;
    flex-wrap: wrap;
    font-size: 11px;
    justify-content: space-evenly;
    gap: 10px;
    /* position: absolute;
    bottom: 0; */
}
.footer a{
    color: grey;
    text-decoration: none;
    
}


.right-box{
    border-radius: 10px;
    background-color:#121212;
    /* height: 38.35rem; */
    height: 100%;
    /* width: 78rem; */
    width: 85%;
    margin-top: 0.5rem;
    font-size: 1rem;
    font-family: sans-serif;
    line-height: 2rem;
    /* overflow-y:scroll;
    overflow-x: hidden; */
    position: relative;
   
}
/* scrollbar css */
/* For WebKit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
    width: 12px; /* Width of the scrollbar */
    height: 12px; /* Height of the scrollbar (for horizontal scrollbars) */
    
  }
  
  ::-webkit-scrollbar-track {
    background: #333; /* Track color */
    border-radius: 20px;
  }
  
  ::-webkit-scrollbar-thumb {
    background-color: #555; /* Scrollbar color */
    border-radius: 6px; /* Rounded corners */
    border: 3px none #333; /* Space around scrollbar */
    border-radius: 5px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background-color: #777; /* Scrollbar color when hovered */
  }
  
  /* For Firefox */
  * {
    scrollbar-width: thin; /* Thin scrollbar */
    scrollbar-color: #555 #333; /* Scrollbar color and track color */
  }
  
  /* Optional: Additional styling for edge cases */
  body {
    overflow: auto; /* Ensure scrollbars are enabled */
  }
  

.header{
    display: flex;
    justify-content: space-between;
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    padding-top: 1rem;
    padding-left: 2rem;
    padding-right: 2rem;
    height: 4rem;
    background-color: #121212;
    border-bottom: 1px solid #212121;
    box-shadow: inset;
    /* background-color: grey; */
    position: fixed;
    top: 0.5rem;
    z-index: 1;
    width: 78%;
}

#nav{
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 2rem;
    width: 2rem;
    background-color: black;
    color: rgb(122, 125, 127);
    border-radius: 100%;
    margin-top: 0.75rem;
    
    
}

/* #btn{
    height: 3rem;
    width: 6.5rem;
    border-radius: 5rem;
    border-style: none;
    font-size: 1rem;
    font-family:'Lucida Sans';
    font-weight: 500;
} */
.sign{
    height: 3rem;
    width: 6.5rem;
    border-radius: 5rem;
    border-style: none;
    font-size: 1rem;
    font-family:'Lucida Sans';
    font-weight: 500;
    background-color: #121212;
    color: rgb(122, 125, 127);
}
.sign:hover{
    color: white;
}

.login{
    height: 3rem;
    width: 6.5rem;
    border-radius: 5rem;
    border-style: none;
    font-size: 1rem;
    font-family:'Lucida Sans';
    font-weight: 500;
}
.login:hover{
    font-size: 1.02rem;
    background-color: rgb(220, 220, 220);
}

.spotify-playlist{
    margin-top: 4.5rem;
    height: 27rem;
    padding: 1rem;
    padding-bottom: 5rem;
     overflow: scroll;
    overflow-x: hidden;
}

.card-container{
    margin: 0.5rem;
    margin-top: 1rem;
    display: flex;
    flex-wrap: wrap;
    /* overflow: scroll;
    overflow-x: hidden; */
    max-height: 28rem;
    min-width: 100%;
}


.card{
    padding: 0.75rem;
    height:max-content;
    width: 200px;
    border-radius: 10px;
    line-height: normal;
    position: relative;
    
}
.card p{
    color: 	#b3b3b3;
}
.card svg{
    color:#121212;
}
.card:hover{
    transition: all 0.35s;
    background-color: #212121;
    --a: 1;
}
.card h2{
    font-size: 15px;
}
.card p{
    font-size: 12px;
}
.card img{
    width: 100%;
    object-fit:contain;
    border-radius: 10px;
}
.card .play{
    position: absolute;
    top: 10.5rem;
    right: 1.5rem;
    opacity: var(--a);
    cursor: pointer;
}
.card .play:hover{
    opacity: 1;
    transition: 0.5s ease-in ;
}

.playbar{
    display: flex;
    height: 2.5rem;
    width: 98%;
    margin: 0.5rem;
    background-color: rgb(38, 39, 38);
    position: fixed;
    bottom: 0;
    justify-content: space-between;
    padding: 0.5rem;
    border-radius: 10px;
}

.song-info, .song-time{
    /* border: 2px solid black; */
    min-width: 15em;
    display: flex;
    align-items: center;
    justify-content: center;
}

.music-controls{
    width: 70%;
}

.seekbar{
    padding-left: 2rem;
    position: relative;
    cursor: pointer;
    height: 4px;
    width: 75%;
    left: 8rem;
    background-color: #3a3a3a;
    justify-content: center;
    border-radius: 10px;
    bottom: 0.75rem;
}
.circle{
    height: 12px;
    width: 12px;
    border-radius: 100%;
    background-color: #555;
    position: absolute;
    top: -4.5px;
    left: 0%;
    transition: left 0.5s ;
}
.play-btn{
    margin-left: 6rem;
    text-align: center;
    padding: 0.25rem;
    padding-bottom: 1.5rem
}
.play-btn i{
    margin:0px 0.75rem;
    cursor: pointer;
}

#time-vol{
    display: flex;
}

.vol{
    display: flex;
    align-items: center;
    padding-right: 2rem;
}

/* #vol:hover::after{

} */
</style>
<body>
    <div class="container">
        <div class="left-box">
            <div class="upper-left">
                <div class="spotify hd">
                    <img src="https://storage.googleapis.com/pr-newsroom-wp/1/2023/05/Spotify_Full_Logo_RGB_White.png">
                </div>
                <div class="home hd">
                    <i class="fa-solid fa-house"></i>
                    <p>Home</p>
                </div>
                <div class="search hd">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    <p>Search</p>
                </div>
            </div>

            <div class="lower-left">
                <div class="library hd ">
                    <div class="lib hd">
                        <i class="fa-solid fa-rectangle-list"></i>
                        <p>Your Library</p>
                    </div>
                </div>

                <div class="songList">
                    <ul>
                        <!-- <li>
                            <div class="music-info">
                                <div class="music-icon"><i class="fa-solid fa-music"></i></div>
                                <div class="info">
                                    <div class="song-name">Song Name</div>
                                    <div class="artist-name">artist name</div>
                                </div>
                            </div>

                            <div class="now-play">
                                <p>Play<br>Now</p>
                                <i class="fa-solid fa-circle-play"></i>
                            </div>
                        </li> -->
                    </ul>
                    

                <div class="footer">

                    <a href="https://www.spotify.com/in-en/legal/"><span> Legal </span></a>
                    <a href="https://www.spotify.com/in-en/safetyandprivacy/"><span> Privacy Center</span></a>

                    <a href="https://www.spotify.com/in-en/legal/privacy-policy/"><span>Privacy Policy</span></a>

                    <a href="https://www.spotify.com/in-en/legal/cookies-policy/"><span>Cookies</span></a>

                    <a href="https://www.spotify.com/in-en/legal/privacy-policy/#s3"><span>About Ads</span></a>

                    <a href="https://www.spotify.com/in-en/accessibility/"><span>Accessibility</span></a>



                </div>
                </div>
            </div>
        </div>

        <div class="right-box">
            <div class="header">
                <div class="nav">
                    <svg id="nav" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                        color="#000000" fill="none">
                        <path d="M15 6C15 6 9.00001 10.4189 9 12C8.99999 13.5812 15 18 15 18" stroke="currentColor"
                            stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <svg id="nav" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"
                        color="#000000" fill="none">
                        <path d="M9.00005 6C9.00005 6 15 10.4189 15 12C15 13.5812 9 18 9 18" stroke="currentColor"
                            stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </div>
                <div class="button">
                    <button id="btn" class="sign">Sign up</button>
                    <button id="btn" class="login">Log in</button>
                </div>
            </div>
            <div class="spotify-playlist">
                <div class="playlist-1">
                    <h1>Spotify Playlists</h1>
                    <div class="card-container">
                        
                    </div>
                </div>
                
            </div>
            
        </div>
        <div class="playbar">
            <div class="song-info"></div>
            <div class="music-controls">
                <div class="play-btn">
                    <i id="previous"  class="fa-solid fa-backward-step"></i>
                    <i id="play" class="fa-solid fa-play"></i>
                    <i id="next" class="fa-solid fa-forward-step"></i>
                </div>
                <div class="seekbar">
                    <div class="circle">
                        
                    </div>
                </div>
            </div>
             <div id="time-vol">
                <div class="song-time"></div>
                <div class="vol">
                    <i ont id="vol" class="fa-solid fa-volume-high"></i>
                    <div class="range">
                        <input type="range" name="volume">
                    </div>
                </div>
             </div>
            
        </div>
    </div>


    <script>
        console.log("javascript for spotify")
let currentSong = new Audio;
let songs;
let currFolder

function convertSeconds(seconds) {
    const minutes = parseInt(Math.floor(seconds / 60));
    const remainingSeconds = parseInt(seconds % 60);
    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;

}


async function getSongs(folder) {

    currFolder = folder
    let a = await fetch(`/${folder}/`)
    let response = await a.text();
    let div = document.createElement("div")
    div.innerHTML = response
    let as = div.getElementsByTagName("a")
    songs = []
    for (let index = 0; index < as.length; index++) {
        const element = as[index];
        if (element.href.toString().endsWith('.mp3')) {
            songs.push(element.href.split(`/${currFolder}/`)[1]) // in 20% foem both plist
        }
    }


    let songUL = document.querySelector(".songList").getElementsByTagName("ul")[0]
    songUL.innerHTML = ""
    // console.log(songUL)

    for (const song of songs) {
        songUL.innerHTML = songUL.innerHTML + `<li>
                            <div class="music-info">
                                <div class="music-icon"><i class="fa-solid fa-music"></i></div>
                                <div class="info">
                                    <div class="song-name">${song.replaceAll("%20", " ")}</div>
                                    <div class="artist-name">artist name</div>
                                </div>
                            </div>
                            
                            <div class="now-play">
                                <p>Play<br>Now</p>
                                <i class="fa-solid fa-circle-play"></i>
                            </div>
        </li>`
    }

    // attach an evnet listener to each song
    Array.from(document.querySelector(".songList").getElementsByTagName("li")).forEach(e => {
        e.addEventListener("click", () => {
            console.log(e.getElementsByClassName("info")[0].getElementsByClassName("song-name")[0].innerHTML)
            playMusic(e.getElementsByClassName("info")[0].getElementsByClassName("song-name")[0].innerHTML)

            const element = document.getElementsByClassName("play-btn");  // Get the DIV element
            element[0].childNodes[3].classList.remove("fa-play"); // Remove mystyle class from DIV
            element[0].childNodes[3].classList.add("fa-pause"); // Add newone class to DIV

        })


    })
    return songs
}

const playMusic = (track, pause = false) => {
    // let audio = new Audio("/Songs/"+track);
    currentSong.src = `/${currFolder}/` + track
    if (!pause) {
        currentSong.play();
    }

    document.querySelector(".song-info").innerHTML = track
    document.querySelector(".song-time").innerHTML = "00:00 / 00:00"
}

async function displayAlbum() {
    let a = await fetch(`/Songs/`)
    let response = await a.text();
    let div = document.createElement("div")
    div.innerHTML = response
    // console.log(div)
    let cardContainer = document.querySelector(".card-container")
    let anchors = div.getElementsByTagName("a")
    let array = Array.from(anchors)
    for (let index = 0; index < array.length; index++) {
        const e = array[index];


        if (e.href.includes("/Songs/")) {
            let folder = (e.href.split("/Songs/").slice(-1)[0])
            let a = await fetch(`/Songs/${folder}/info.json`)
            let response = await a.json();
            cardContainer.innerHTML = cardContainer.innerHTML + `<div data-folder="${folder}" class="card">
            <div class="play">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="35" height="35">
                    <!-- Green circle -->
                    <circle cx="15" cy="15" r="15" fill="#17c617" />

                    <!-- Existing SVG content centered within the circle -->
                    <g transform="translate(3, 3)">
                        <path
                            d="M18.8906 12.846C18.5371 14.189 16.8667 15.138 13.5257 17.0361C10.296 18.8709 8.6812 19.7884 7.37983 19.4196C6.8418 19.2671 6.35159 18.9776 5.95624 18.5787C5 17.6139 5 15.7426 5 12C5 8.2574 5 6.3861 5.95624 5.42132C6.35159 5.02245 6.8418 4.73288 7.37983 4.58042C8.6812 4.21165 10.296 5.12907 13.5257 6.96393C16.8667 8.86197 18.5371 9.811 18.8906 11.154C19.0365 11.7084 19.0365 12.2916 18.8906 12.846Z"
                            fill="black" stroke="currentColor" stroke-width="1.5"
                            stroke-linejoin="round" />
                    </g>
                </svg>
            </div>
            <img src="/Songs/${folder}/cover.jpeg" alt="">
            <h2>${response.title}</h2>
            <p>${response.description}</p>
        </div>`
        }

    }

    //add event listener on each card
    Array.from(document.getElementsByClassName("card")).forEach(e => {
        e.addEventListener("click", async items => {
            folder = items.currentTarget.dataset.folder
            songs = await getSongs(`Songs/${items.currentTarget.dataset.folder}`)

        })
    })


}




async function main() {
    await getSongs("Songs/Album")
    // console.log(songs)

    playMusic(songs[0], true)


    //display album
    await displayAlbum()


    

    // attach an event ;sitener to play pause prev
    play.addEventListener("click", () => {
        if (currentSong.paused) {
            currentSong.play()
            const element = document.getElementsByClassName("play-btn");  // Get the DIV element
            element[0].childNodes[3].classList.remove("fa-play"); // Remove mystyle class from DIV
            element[0].childNodes[3].classList.add("fa-pause"); // Add newone class to DIV
        } else {
            currentSong.pause()
            const element = document.getElementsByClassName("play-btn");  // Get the DIV element
            element[0].childNodes[3].classList.remove("fa-pause"); // Remove mystyle class from DIV
            element[0].childNodes[3].classList.add("fa-play"); // Add newone class to DIV
        }
    })


    currentSong.addEventListener("timeupdate", () => {
        // console.log(convertSeconds(currentSong.currentTime),convertSeconds(currentSong.duration))
        document.querySelector(".song-time").innerHTML = `${convertSeconds(currentSong.currentTime)}/${convertSeconds(currentSong.duration)}`
        document.querySelector(".circle").style.left = (currentSong.currentTime / currentSong.duration) * 100 + "%"

    })

    // event listener for seekbar
    document.querySelector(".seekbar").addEventListener("click", e => {
        document.querySelector(".circle").style.left = (e.offsetX / e.target.getBoundingClientRect().width) * 100 + "%"
        currentSong.currentTime = (e.offsetX / e.target.getBoundingClientRect().width) * currentSong.duration
    })

    // add event listener to previous and next 
    previous.addEventListener("click", () => {
        console.log("previous")
        let index = parseInt(songs.indexOf(currentSong.src.split(`/${folder}/`)[1]))
        if (index == 0) {
            playMusic(songs[index].replaceAll("%20", " "))
        } else {
            playMusic(songs[index - 1].replaceAll("%20", " "))
        }

    })

    next.addEventListener("click", () => {
        console.log("next")
        let index = parseInt(songs.indexOf(currentSong.src.split(`/${folder}/`)[1]))
        if (index == (songs.length) - 1) {
            const element = document.getElementsByClassName("play-btn");  // Get the DIV element
            element[0].childNodes[3].classList.remove("fa-pause"); // Remove mystyle class from DIV
            element[0].childNodes[3].classList.add("fa-play"); // Add newone class to DIV
            document.querySelector(".circle").style.left = 0 + "%"
            playMusic(songs[0].replaceAll("%20", " "), true)
            document.querySelector(".song-time").innerHTML = "00:00 / 00:00"
        } else {
            playMusic(songs[index + 1].replaceAll("%20", " "))
        }

    })

    // add event to volume
    // console.log(document.querySelector(".range").getElementsByTagName("input"))
    document.querySelector(".range").getElementsByTagName("input")[0].addEventListener("change", (e) => {
        console.log(e.target.value)
        currentSong.volume = parseInt(e.target.value) / 100
        const sound = document.getElementById("vol")
        sound.classList.remove("fa-volume-xmark")
        sound.classList.add("fa-volume-high")
    })

    // add event to mute
    let curr_vol = currentSong.volume
    let count = 0

    document.getElementById("vol").addEventListener("click", (e) => {
        count++
        if (count == 1) {
            currentSong.volume = 0
            const sound = document.getElementById("vol")
            sound.classList.remove("fa-volume-high")
            sound.classList.add("fa-volume-xmark")
        } else if (count == 2) {
            currentSong.volume = curr_vol
            const sound = document.getElementById("vol")
            sound.classList.remove("fa-volume-xmark")
            sound.classList.add("fa-volume-high")
            count = 0
        }
    })




}

main()

    </script>
</body>

</html>